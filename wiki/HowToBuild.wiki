#summary How to build mod_pagespeed from source

== Prerequisites ==
The build has been tested on Ubuntu Hardy/Lucid and CentOS 5.4. It should work elsewhere; if you try it somewhere new, please leave a comment with your success or failure.

We require Apache (>= 2.2), g++ (>= 4.2), subversion, and make.
  * On Debian/Ubuntu: `sudo apt-get install apache2 subversion g++ make`
  * On CentOS: `sudo yum install httpd subversion gcc-c++ make`

== Chromium depot tools ==
We require the Chromium 'depot_tools', which are used to build multiple open-source projects with dependencies on other open-source projects.
{{{
  mkdir -p ~/bin
  cd ~/bin
  svn co http://src.chromium.org/svn/trunk/tools/depot_tools
}}}
You will need to add the depot_tools to your path. i.e. in bash:
{{{
  export PATH=$PATH:~/bin/depot_tools
}}}

== Checking out mod_pagespeed and dependencies ==
{{{
  mkdir ~/mod_pagespeed    # any directory is fine
  cd ~/mod_pagespeed
  gclient config http://modpagespeed.googlecode.com/svn/trunk/src
  gclient sync --force     # this will download all source code
}}}

== Compiling mod_pagespeed ==
{{{
  cd ~/mod_pagespeed/src
  make BUILDTYPE=Release   # BUILDTYPE defaults to 'Debug'
}}}
To see the actual g++ commands, you can type `make V=1`.

TODO: describe advanced compilation options such as compiling against system headers.

== Building mod_pagespeed RPM/DEB packages ==

You can build packages using the following commands:
{{{
  make BUILDTYPE=Release linux_package_rpm
}}}
or
{{{
  make BUILDTYPE=Release linux_package_deb
}}}

The resulting package file will be in the `out\Release` directory.

== Monitoring a mod_pagespeed installation ==
You can view a simple set of real-time variables by visiting `http://localhost/mod_pagespeed_statistics`.  By default, this page is only viewable from localhost; you can enable additional hosts in `pagespeed.conf`.